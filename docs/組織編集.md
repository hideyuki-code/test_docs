## 1. 基本情報

画面名: 組織編集

path: /organizations/{organization_id}/edit

figma:

概要: 組織情報の編集、所属メンバーの管理、子組織の確認

想定利用者: adminのみ

## 2. 権限

[組織一覧](https://www.notion.so/2a463cc39e46801492cbe87a269c1458?pvs=21)を参照

## 3. データ定義

### 基本情報

| カラム名 | 必須 | 型 | 値・定義 | 備考 |
| --- | --- | --- | --- | --- |
| 組織名 | ◯ | string | 1行 | text |
| 責任者 | ◯ | user_id | ユーザーIDを参照 | 検索機能付きセレクトボックスデータソース: User全体 |
| 親組織 | ✗ | organization_id | 組織IDを参照 | セレクトボックス（階層構造表示）
データソース: 全組織
デフォルト値: なし(最上位) |

### 所属メンバー

| カラム名 | 必須 | 型 | 値・定義 | placeholder | 備考 |
| --- | --- | --- | --- | --- | --- |
| 名前(表示) | - | string | 表示形式: 「{姓} {名}」 | - | リンク先: ユーザー詳細画面 |

### 子組織

| カラム名 | 必須 | 型 | 値・定義 | placeholder | 備考 |
| --- | --- | --- | --- | --- | --- |
| 組織名 | - | string | - | - | リンク先: 組織詳細画面 |
| 責任者 | - | string | 責任者の氏名 | - | 表示のみ |
| メンバー数 | - | number | - | - | 単位: 名 |

## 4. 機能

### 基本情報編集機能

| 機能 | 動作 |
| --- | --- |
| 組織名入力 | テキスト入力（1行） |
| 責任者選択 | ・検索機能付きセレクトボックス
・インクリメンタルサーチ対応
・入力中はドロップダウン表示 |
| 親組織選択 | ・通常のセレクトボックス
・階層構造で表示（インデント + ├ 記号）
・「なし(最上位)」以外を選択時、警告メッセージ表示 |
| 保存ボタン | ・必須項目入力後、活性化
・クリックで組織情報を保存 |
| キャンセルボタン | ・編集内容を破棄して前画面に戻る |

### 親組織変更時の警告表示

| 条件 | 動作 |
| --- | --- |
| 親組織が「なし(最上位)」以外 | 黄色の警告メッセージを表示:<br>「⚠ この組織の配下にある子組織も一緒に移動します」 |
| 親組織が「なし(最上位)」 | 警告メッセージ非表示 |

### 所属メンバー管理機能

| 機能 | 動作 |
| --- | --- |
| メンバー一覧表示 | ・テーブル形式で表示
・表示項目: 名前、操作
・ヘッダーにメンバー数を表示「所属メンバー (X名)」 |
| メンバー名リンク | クリックでユーザー詳細画面へ遷移 |
| 追加ボタン | ・ヘッダー右側に配置
・クリックでメンバー追加モーダル表示 |
| 削除ボタン | ・各行に削除アイコン表示
・クリックで確認ダイアログ表示・確認後、メンバーを削除 |

### メンバー追加モーダル

| 機能 | 動作 |
| --- | --- |
| モーダル表示 | ・追加ボタンクリックで表示<br>・背景オーバーレイ表示 |
| ユーザー選択 | セレクトボックスでユーザーを選択 |
| 追加ボタン | ・選択したユーザーを所属メンバーに追加<br>・モーダルを閉じる |
| キャンセルボタン | ・入力内容を破棄<br>・モーダルを閉じる |
| ×ボタン | ・入力内容を破棄<br>・モーダルを閉じる |

### 子組織一覧表示機能

| 機能 | 動作 |
| --- | --- |
| 子組織一覧表示 | ・テーブル形式で表示<br>・表示項目: 組織名、責任者、メンバー数<br>・ヘッダーに子組織数を表示「子組織 (X個)」 |
| 組織名リンク | クリックで該当組織の詳細画面へ遷移 |