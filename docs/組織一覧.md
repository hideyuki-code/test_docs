## 1. 基本情報

画面名: 組織一覧

path: /organizations

プロトタイプ: https://claude.ai/public/artifacts/c43ef2d1-a443-46f9-b0b1-b0116b1264a7

Figma: 

概要: 組織の階層構造を一覧表示し、組織の追加・移動・削除を行う

想定利用者: 全ユーザー

## 2. 権限

| ロール | 一覧の閲覧 | 詳細の閲覧 | 編集の閲覧 | 一覧の編集（追加・移動・削除） |
| --- | --- | --- | --- | --- |
| reader | ○ | ○ | × | × |
| writer | ○ | ○ | × | × |
| admin | ○ | ○ | ○ | ○ |

## 3. データ定義

| (* = 必須)カラム名 | 型 | 値・定義 | placeholder | デフォ値 | 備考 |
| --- | --- | --- | --- | --- | --- |
| *組織名 | string | 組織の名称 | 経営戦略 |  | 重複可 |
| *責任者 | string | 組織の責任者名 | 山田 太郎 |  |  |
| メンバー数 | number | 所属メンバー数 |  | 0 | 自動計算または手動入力 |

## 4. 機能

### 4-1. システム共通

| 機能名 | 概要 | 詳細 | 対象 |
| --- | --- | --- | --- |
| **閲覧** | 階層構造の一覧表示 | ・組織名
・責任者
・メンバー数
を階層構造で表示 | 全ユーザー |
| **詳細閲覧** | カードクリックで詳細ページに遷移 | -  | 全ユーザー |
| **削除** | レコードを削除 | 削除ボタンクリックで確認モーダルがopen。
子組織が存在する場合は削除不可でエラー表示 | adminユーザー |

### 4-2. 固有機能

| 機能名 | 概要 | 詳細 | 対象 |
| --- | --- | --- | --- |
| **組織追加** | 新規組織を作成 | 「+ 組織を追加」ボタンをクリックしてモーダルを表示。
・組織名（必須）
・親組織（任意）
・責任者（必須）
を入力して追加 | adminユーザー |
| **組織移動** | 組織の親を変更 | 「移動」ボタンをクリックしてモーダルを表示。
移動先の親組織を選択。
子組織も一緒に移動。
自組織および自組織の子孫への移動は不可 | adminユーザー |
| 親組織選択 | 階層構造での組織選択 | セレクトボックスで親組織を選択する際、階層構造を視覚化して表示。
移動時は自組織と子孫組織を選択肢から除外 | adminユーザー |

### 4-3. モーダル仕様

| モーダル名 | 表示項目 | 入力形式 | バリデーション | 選択肢/備考 |
| --- | --- | --- | --- | --- |
| **組織追加** | 組織名 | テキスト入力 | 未入力の場合はエラー | -  |
|  | 親組織 | セレクトボックス | 未入力の場合はエラー | 全組織 |
|  | 責任者 | テキスト入力 | 未入力の場合はエラー | -  |
|  | ボタン | キャンセル / 追加 | - | キャンセル：モーダルを閉じる /
追加：入力内容を保存して組織を作成 |
| **組織移動** | 移動する組織名 | 表示のみ | - | 選択中の組織名を表示 |
|  | 移動先の親組織 | セレクトボックス | 未選択の場合はエラー 
自組織または自組織の子孫が選択された場合はエラー | 「なし（トップレベル）」+ 移動可能な組織（自組織と自組織の子孫は除外） |
|  | 注意文言 | 表示のみ | - | 「※ この組織の配下にある子組織も一緒に移動します」 |
|  | ボタン | キャンセル / 移動 | - | キャンセル：モーダルを閉じる / 移動：選択した親組織に移動を実行 |
| **削除確認** | 確認メッセージ | 表示のみ | - | 「本当にこの組織を削除しますか？」 |
|  | 削除する組織名 | 表示のみ | - | 選択中の組織名を表示 |
|  | 警告文言 | 表示のみ | 子組織が存在する場合は削除不可でエラー表示 | 「⚠️ この操作は取り消せません。子組織がある場合は削除できません。」 |
|  | ボタン | キャンセル / 削除 | - | キャンセル：モーダルを閉じる / 削除：組織を削除 |